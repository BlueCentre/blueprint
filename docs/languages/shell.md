# Shell Script Guide

This guide covers working with shell scripts in Blueprint using `rules_shell`.

## Quick Start

### Project Structure

```
my-scripts/
├── BUILD
├── script.sh
└── lib.bash
```

### Shell Scripts

Executable scripts (with shebang):

```bash
#!/bin/bash
# script.sh
echo "Hello from Blueprint!"
```

Library scripts (no shebang):

```bash
# lib.bash
greet() {
    echo "Hello, $1!"
}
```

## BUILD File

Aspect CLI automatically generates targets for shell scripts:

```starlark
# Generated by .aspect/cli/shell.star
load("@rules_shell//shell:sh_binary.bzl", "sh_binary")
load("@rules_shell//shell:sh_library.bzl", "sh_library")

sh_binary(
    name = "script",
    srcs = ["script.sh"],
)

sh_library(
    name = "shell_lib",
    srcs = ["lib.bash"],
)
```

## Running Scripts

```bash
# Run script
bazel run //path/to:script

# With arguments
bazel run //path/to:script -- arg1 arg2
```

## Shell Testing

```bash
#!/bin/bash
# test.sh
set -e

source lib.bash

result=$(greet "Blueprint")
[[ "$result" == "Hello, Blueprint!" ]] || exit 1

echo "Tests passed!"
```

```starlark
sh_test(
    name = "test",
    srcs = ["test.sh"],
    data = [":shell_lib"],
)
```

## Linting

Blueprint uses shellcheck for linting:

```bash
# Lint shell scripts
aspect lint //...

# Configure in .shellcheckrc
```

## Resources

- [rules_shell Documentation](https://github.com/tweag/rules_shell)
- [ShellCheck](https://www.shellcheck.net/)
